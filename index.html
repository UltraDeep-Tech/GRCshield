<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>Safety Shield Ultra</title>
  <meta name="description" content="Safety Shield Ultra offers comprehensive solutions for monitoring, detecting, and managing cyber threats, abusive user behavior, hallucination detection, and data exposure incidents. Stay protected with real-time analytics and security insights.">
  <meta name="keywords" content="cybersecurity, threat detection, abusive user management, hallucination detection, data exposure, monitoring, safety shield ultra, security, AI, dashboard">
  
  <!-- Favicons -->
  <link href="assets/img/favicon.png" rel="icon">
  <link href="assets/img/favicon.png" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link href="https://fonts.gstatic.com" rel="preconnect">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
  <link href="assets/vendor/quill/quill.snow.css" rel="stylesheet">
  <link href="assets/vendor/quill/quill.bubble.css" rel="stylesheet">
  <link href="assets/vendor/remixicon/remixicon.css" rel="stylesheet">
  <link href="assets/vendor/simple-datatables/style.css" rel="stylesheet">
  
  <!-- Template Main CSS File -->
  <link id="darkmode-base" href="assets/css/style.css" rel="stylesheet">
  <link id="darkmode-item" href="assets/css/customcharts.css" rel="stylesheet">
  <link id="lightmode" href="assets/css/lightmode.css" rel="stylesheet" disabled>


  <!-- Firebase JS SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.8.3/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.8.3/firebase-database-compat.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="assets/js/datagraficos.js"></script>
  <script src="assets/js/profile.js"></script>

</head>

<body>
  <video autoplay muted loop class="video-background">
    <source src="assets/img/compressed_dashboard_background.mp4" type="video/mp4">
  </video>

  <!-- ======= Header ======= -->
  <header id="header" class="header fixed-top d-flex align-items-center">  

    <div class="d-flex align-items-center justify-content-between">
      <a href="index.html" class="logo d-flex align-items-center">
        <img src="assets/img/favicon.png" alt="" class="logoheader">
        <span class="d-none d-lg-block">Safety Shield Ultra</span>
      </a>
      <i class="bi bi-list toggle-sidebar-btn"></i>
    </div><!-- End Logo -->

    <nav class="header-nav ms-auto">
      <ul class="d-flex align-items-center">
        <!-- Hack Mode Switch -->
        <li class="nav-item d-flex align-items-center me-4 hack-mode-container">
          <!-- Icono de sol para pantallas medianas y más grandes -->
          <span class="bi bi-sun me-1 d-none d-md-inline-block" style="color: #fff;"></span>

          <!-- Switch de Hack Mode para pantallas medianas y más grandes -->
          <div class="form-check form-switch d-none d-md-flex">

            <input class="form-check-input " type="checkbox" role="switch" id="flexSwitchCheckChecked" checked>
            <span class="bi bi-moon ms-1 " style="color: #fff;"></span>

            <label class="form-check-label ms-1" for="flexSwitchCheckChecked"></label>
            
          </div>
          
          <!-- Icono de luna para pantallas pequeñas -->
          <i class="bi bi-moon d-md-none hack-mode-icon"></i>
        </li>
    
        <li class="nav-item dropdown">
          <a class="nav-link nav-icon" href="#" data-bs-toggle="dropdown">
            <i class="bi bi-bell bellnotification"></i>
            <span class="badge bg-primary badge-number" style="color: #000 !important;">4</span>
          </a><!-- End Notification Icon -->
    
          <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow notifications">
            <li class="dropdown-header" data-translate="notifications_header">
              You have 4 new notifications
              <a href="#"><span class="badge rounded-pill bg-primary p-2 ms-2" data-translate="view_all">View all</span></a>
            </li>
            <li>
              <hr class="dropdown-divider">
            </li>
    
            <li class="notification-item">
              <i class="bi bi-exclamation-circle text-warning"></i>
              <div>
                <h4 data-translate="notification_blocked_requests">Increased Blocked Requests</h4>
                <p data-translate="notification_blocked_requests_detail">Spike in blocked requests detected in the last hour.</p>
                <p data-translate="notification-alert-1"> 30 min. ago</p>
              </div>
            </li>
    
            <li>
              <hr class="dropdown-divider">
            </li>
    
            <li class="notification-item">
              <i class="bi bi-x-circle text-danger"></i>
              <div>
                <h4 data-translate="notification_abusive_user">New Abusive User Detected</h4>
                <p data-translate="notification_abusive_user_detail">User GUID 1234 flagged for potential abusive behavior.</p>

                <p data-translate="notification-alert-2">1 hr. ago</p>
              </div>
            </li>
    
            <li>
              <hr class="dropdown-divider">
            </li>
    
            <li class="notification-item">
              <i class="bi bi-check-circle text-success"></i>
              <div>
                <h4 data-translate="notification_hallucination">Hallucination Detection Update</h4>
                <p data-translate="notification_hallucination_detail">New algorithm for hallucination detection deployed.</p>
                <p data-translate="notification-alert-3">2 hrs. ago</p>
              </div>
            </li>
    
            <li>
              <hr class="dropdown-divider">
            </li>
    
            <li class="notification-item">
              <i class="bi bi-info-circle text-primary"></i>
              <div>
                <h4 data-translate="notification_report">Weekly Report Available</h4>
                <p data-translate="notification_report_detail">The Safety Shield Ultra weekly summary is ready for review.</p>
                <p data-translate="notification-alert-4">4 hrs. ago</p>
              </div>
            </li>
    
            <li>
              <hr class="dropdown-divider">
            </li>
            <li class="dropdown-footer text-center">
              <a href="#" data-translate="show_all_notifications">Show all notifications</a>
            </li>
          </ul><!-- End Notification Dropdown Items -->
        </li><!-- End Notification Nav -->
    
        <li class="nav-item dropdown">
          <a class="nav-link nav-icon" href="#" data-bs-toggle="dropdown">
            <i class="bi bi-chat-left-text"></i>
            <span class="badge bg-success badge-number" style="color: #000 !important;"">3</span>
          </a><!-- End Messages Icon -->
    
          <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow messages">
            <li class="dropdown-header" data-translate="dropdown_messages_header">
              You have 3 new messages
              <a href="#"><span class="badge rounded-pill bg-primary p-2 ms-2" data-translate="dropdown_messages_view_all">View all</span></a>
            </li>
            <li>
              <hr class="dropdown-divider">
            </li>
    
            <li class="message-item">
              <a href="#">
                <img src="assets/img/messages-1.jpg" alt="" class="rounded-circle">
                <div>
                  <h4>Maria Hudson</h4>
                  <p data-translate="message_1_text">The project files have been uploaded successfully.</p>
                  <p data-translate="message_1_time">4 hrs. ago</p>
                </div>
              </a>
            </li>
            <li>
              <hr class="dropdown-divider">
            </li>
    
            <li class="message-item">
              <a href="#">
                <img src="assets/img/messages-2.jpg" alt="" class="rounded-circle">
                <div>
                  <h4>Anna Nelson</h4>
                  <p data-translate="message_2_text">Meeting rescheduled to tomorrow at 10 AM.</p>
                  <p data-translate="message_2_time">6 hrs. ago</p>
                </div>
              </a>
            </li>
            <li>
              <hr class="dropdown-divider">
            </li>
    
            <li class="message-item">
              <a href="#">
                <img src="assets/img/messages-3.jpg" alt="" class="rounded-circle">
                <div>
                  <h4>David Muldon</h4>
                  <p data-translate="message_3_text">Can you review the latest draft of the report?</p>
                  <p data-translate="message_3_time">8 hrs. ago</p>
                </div>
              </a>
            </li>
            <li>
              <hr class="dropdown-divider">
            </li>
    
            <li class="dropdown-footer text-center">
              <a href="#" data-translate="dropdown_messages_show_all">Show all messages</a>
            </li>
          </ul><!-- End Messages Dropdown Items -->
        </li><!-- End Messages Nav -->
    
        <li class="nav-item dropdown pe-3">
          <a class="nav-link nav-profile d-flex align-items-center pe-0" href="#" data-bs-toggle="dropdown">
            <img id="profileImage" alt="Profile" class="rounded-circle me-3">
          </a><!-- End Profile Image Icon -->
    
          <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow profile fondoperfil">
            <li class="dropdown-header text-center">
              <h6 id="fullName"></h6>
              <span id="Job"></span>
            </li>
            <li>
              <hr class="dropdown-divider">
            </li>
    
            <li>
              <a class="dropdown-item d-flex align-items-center" href="users-profile.html">
                <i class="bi bi-person"></i>
                <span data-translate="profile">My Profile</span>
              </a>
            </li>
            <li>
              <hr class="dropdown-divider">
            </li>
    
            <li>
              <a class="dropdown-item d-flex align-items-center" href="users-profile.html">
                <i class="bi bi-gear"></i>
                <span data-translate="account_settings">Account Settings</span>
              </a>
            </li>
            <li>
              <hr class="dropdown-divider">
            </li>
    
            <li>
              <a class="dropdown-item d-flex align-items-center" href="pages-faq.html">
                <i class="bi bi-question-circle"></i>
                <span data-translate="need_help">Need Help?</span>
              </a>
            </li>
            <li>
              <hr class="dropdown-divider">
            </li>
    
            <li>
              <a class="dropdown-item d-flex align-items-center" href="#" onclick="signOut(event)">
                <i class="bi bi-box-arrow-right"></i>
                <span data-translate="sign_out">Sign Out</span>
              </a>
            </li>

            </div>
          </ul><!-- End Profile Dropdown Items -->
        </li><!-- End Profile Nav -->
      </ul>
    </nav><!-- End Icons Navigation -->
    
    
    
    
    

  </header>
  <!-- End Header -->


  <a href="https://chat.ultradeep.tech/" class="whatsapp-float" target="_blank" data-aos="fade-up" id="chat-link">
    <i class="bi bi-robot whatsapp-icon"></i>
    <span class="tooltip-text" data-translate="robot">Hi, how can I assist you today?</span>
</a>

<audio id="popup-sound" src="/assets/sound/level-up-191997.mp3" preload="auto"></audio>


<div id="loginModal" class="custom-modal">
  <div class="custom-modal-content">
    <img src="assets/img/logo.png" class="spinner-image" alt="Loading...">
    <p data-translate="session_expired">Your session has expired or you are not logged in. Redirecting to login page...</p>
  </div>
</div>

 <!-- ======= Sidebar ======= -->
 <aside id="sidebar" class="sidebar">
  <ul class="sidebar-nav" id="sidebar-nav">
    <li class="nav-heading" data-translate="sidebar_department">Department</li>

  <li class="">
      <!-- Mostrar el departamento y permitir cambiarlo -->
      <div id="user-department" class="text-center mb-2 align-items-center"></div>
      <select id="department-select" class="modern-select mt-2">
        <!-- Las opciones se llenarán dinámicamente con JavaScript -->
      </select>
    </li>
    <br>
      

    <li class="nav-item">
      <a class="nav-link " href="index.html">
        <i class="bi bi-grid"></i>
        <span>Dashboard</span>
      </a>
    </li><!-- End Dashboard Nav -->

    <li class="nav-item">
      <a class="nav-link collapsed" href="#" data-bs-target="#interaction-analysis-nav" data-bs-toggle="collapse">
        <i class="bi bi-chat-square-dots"></i><span class="nav-link-text" data-translate="sidebar_interaction_analysis" data-href="/sentimentanalysis.html">Interaction Analysis</span><i class="bi bi-chevron-down ms-auto"></i>
      </a>
      <ul id="interaction-analysis-nav" class="nav-content collapse" data-bs-parent="#sidebar-nav">
        <li>
          <a href="/sentimentanalysis.html#realtime">
            <i class="bi bi-emoji-smile"></i><span data-translate="sidebar_sentiment_analysis">Sentiment Analysis</span>
          </a>
        </li>
        <li>
          <a href="/sentimentanalysis.html#conversation">
            <i class="bi bi-tags"></i><span data-translate="sidebar_conversation_categorization">Conversation Categorization</span>
          </a>
        </li>
        <li>
          <a href="sentimentanalysis.html#engagement">
            <i class="bi bi-bar-chart"></i><span data-translate="sidebar_engagement_quality_metrics">Engagement Quality Metrics</span>
          </a>
        </li>
        <li>
          <a href="sentimentanalysis.html#keyword">
            <i class="bi bi-search"></i><span data-translate="sidebar_keyword_tracking">Keyword Tracking</span>
          </a>
        </li>
        <li>
          <a href="sentimentanalysis.html#biasdetect">
            <i class="bi bi-slash-circle"></i><span data-translate="sidebar_bias_detection">Bias Detection</span>
          </a>
        </li>
        <li>
          <a href="sentimentanalysis.html#prediction">
            <i class="bi bi-lightbulb"></i><span data-translate="sidebar_user_behavior_prediction">User Behavior Prediction</span>
          </a>
        </li>
        <li>
          <a href="sentimentanalysis.html#realTimeAlertsSection">
            <i class="bi bi-bell"></i><span data-translate="sidebar_real_time_alerts">Real-Time Alerts</span>
          </a>
        </li>
        <li>
          <a href="sentimentanalysis.html#customReportGenerationSection">
            <i class="bi bi-file-earmark-text"></i><span data-translate="sidebar_custom_report_generation">Custom Report Generation</span>
          </a>
        </li>
      </ul>
</li>
    <!-- End Interaction Analysis Nav -->

<!-- Thread Detection Nav -->
<li class="nav-item">
  <a class="nav-link collapsed" href="#" data-bs-target="#charts-nav" data-bs-toggle="collapse">
    <i class="bi bi-exclamation-circle"></i><span class="nav-link-text" data-translate="sidebar_thread_detection" data-href="/index.html">Thread Detection</span><i class="bi bi-chevron-down ms-auto"></i>
  </a>
  <ul id="charts-nav" class="nav-content collapse" data-bs-parent="#sidebar-nav">
    <li>
      <a href="/index.html#totalBlockedRequest">
        <i class="bi bi-shield-lock"></i><span data-translate="sidebar_blocked_requests_rate">Blocked Requests & Rate</span>
      </a>
    </li>
    <li>
      <a href="index.html#blockedRequestsByCategor">
        <i class="bi bi-bar-chart"></i><span data-translate="sidebar_blocked_requests_by_category">Blocked Requests by Category</span>
      </a>
    </li>
    <li>
      <a href="index.html#blockRateOverTimeByCategor">
        <i class="bi bi-graph-up-arrow"></i><span data-translate="sidebar_block_rate_over_time_by_category">Block Rate Over Time by Category</span>
      </a>
    </li>
    <li>
      <a href="index.html#severit">
        <i class="bi bi-exclamation-triangle"></i><span data-translate="sidebar_severity_distribution_by_category">Severity Distribution by Category</span>
      </a>
    </li>
    <li>
      <a href="index.html#SeverityTim">
        <i class="bi bi-clock-history"></i><span data-translate="sidebar_severity_over_time_by_category">Severity Over Time by Category</span>
      </a>
    </li>
    <li>
      <a href="index.html#totalAbusiveUsersChar">
        <i class="bi bi-person-x"></i><span data-translate="sidebar_abusive_user_detection">Abusive User Detection</span>
      </a>
    </li>
    <li>
      <a href="index.html#hallucinationChar">
        <i class="bi bi-eye-slash"></i><span data-translate="sidebar_hallucination_detection">Hallucination Detection</span>
      </a>
    </li>
    <li>
      <a href="index.html#biasPieChar">
        <i class="bi bi-slash-circle"></i><span data-translate="sidebar_bias_detection">Bias Detection</span>
      </a>
    </li>
    <li>
      <a href="index.html#promptInjectionChar">
        <i class="bi bi-shield-exclamation"></i><span data-translate="sidebar_prompt_injection_detection">Prompt Injection/Jailbreak Detection</span>
      </a>
    </li>
    <li>
      <a href="index.html#dataExposureLineChar">
        <i class="bi bi-file-earmark-lock"></i><span data-translate="sidebar_data_exposure_detection">Data Exposure</span>
      </a>
    </li>
  </ul>
</li>

<li class="nav-heading" data-translate="sidebar_policies">Policies</li>

<!-- GRC Policies Nav -->
<li class="nav-item">
  <a class="nav-link collapsed" href="#" data-bs-target="#grc-policies-nav" data-bs-toggle="collapse">
    <i class="bi bi-file-earmark-lock"></i><span class="nav-link-text" data-translate="sidebar_grc_policies" data-href="/grc-policies.html">GRC Policies</span><i class="bi bi-chevron-down ms-auto"></i>
  </a>
  <ul id="grc-policies-nav" class="nav-content collapse" data-bs-parent="#sidebar-nav">
    <li>
      <a href="/grc-policies.html#existing-policies-tab">
        <i class="bi bi-file-earmark-text"></i><span data-translate="sidebar_existing_policies">Policies</span>
      </a>
    </li>
    <li>
      <a href="grc-policies.html#add-policy-tab">
        <i class="bi bi-plus-square"></i><span data-translate="sidebar_add_policies">Add Policies</span>
      </a>
    </li>
    <li>
      <a href="grc-policies.html#export-policy-tab">
        <i class="bi bi-upload"></i><span data-translate="sidebar_import_policies">Import Policies</span>
      </a>
    </li>
    <li>
      <a href="grc-policies.html#generate-report-tab">
        <i class="bi bi-file-earmark-bar-graph"></i><span data-translate="sidebar_generate_report">Generate Report</span>
      </a>
    </li>
    <li>
      <a href="grc-policies.html#alerts-tab">
        <i class="bi bi-bell"></i><span data-translate="sidebar_notifications">Notifications</span>
      </a>
    </li>
    <li>
      <a href="grc-policies.html#chartsPolicy">
        <i class="bi bi-bar-chart"></i><span data-translate="sidebar_charts">Charts</span>
      </a>
    </li>
  </ul>
</li>

<li class="nav-heading" data-translate="sidebar_pages">Pages</li>

    <li class="nav-item">
      <a class="nav-link collapsed" href="users-profile.html">
        <i class="bi bi-person"></i>
        <span data-translate="sidebar_profile">Profile</span>
      </a>
    </li><!-- End Profile Page Nav -->

    <li class="nav-item">
      <a class="nav-link collapsed" href="pages-faq.html">
        <i class="bi bi-question-circle"></i>
        <span data-translate="sidebar_faq">F.A.Q</span>
      </a>
    </li><!-- End F.A.Q Page Nav -->

    <li class="nav-item">
      <a class="nav-link collapsed" href="pages-contact.html">
        <i class="bi bi-envelope"></i>
        <span data-translate="sidebar_contact">Contact</span>
      </a>
    </li><!-- End Contact Page Nav -->

  </ul>
  <div class="container">
    <div id="languageSwitcher" class="language-switcher2">
      <img   src="assets/img/Flag_of_the_U.S..svg.png" alt="English" data-lang="en" class="language-flag2" style="cursor: pointer;" >
      <img src="assets/img/Bandera_de_España.svg.png" alt="Español" data-lang="es" class="language-flag2" style="cursor: pointer;"  >
    </div>
    <img src="/assets/img/logo.png" class="sidebar-bg">


  
</aside><!-- End Sidebar-->



<div id="preloader">
  <img src="/assets/img/favicon.png" alt="Loading..." class="spinner-image">
</div>

  <main id="main" class="main">

    <section class="section">
      <div class="row">


    <div class="pagetitle col-lg-2">
      <h1>Dashboard</h1>
      <nav>
        <ol class="breadcrumb text-center align-items-center ">
          <li class="breadcrumb-item" ><a href="index.html"  data-translate="home">Home</a></li>
          <li class="breadcrumb-item active" >Dashboard</li>
        </ol>
      </nav>
    </div><!-- End Page Title -->

 <div class="col-lg-10">
        <div class="cardindexscore" id="cardindexscore">
            <div class="cardindex-bodyscore">
              <h5 class="cardindex-titlescore" data-translate="ultra_deep_index">Ultra Deep Index</h5>
              <div class="progress-bar-container">
                    <div class="progress-bar" id="progressBar">
                        <span class="progress-text" id="progressText">0</span>
                    </div>
                    <svg id="shield" class="shield" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 236.25 300.87">
                        <defs>
                        </defs>
                        <g id="Capa_2" data-name="Capa 2">
                            <g id="Capa_1-2" data-name="Capa 1">
                                <path class="cls-1" d="M90.17,220.63a7.18,7.18,0,0,0,1.5,4c4.16,5.26,2,13.71-4,15.17a7.28,7.28,0,0,1-7.81-2.37c-2.57-2.93-3.9-6.26-2.39-10a11.65,11.65,0,0,1,3.87-5,4.24,4.24,0,0,0,1.51-1.56,3.89,3.89,0,0,0,.37-2c-.26-3.83,1.27-60.09,1.27-60.12s3.73-2.93,5.36-2.38C92.44,157.3,90,213.22,90.17,220.63Zm-5.28,7A3.1,3.1,0,0,0,82.16,231a3.14,3.14,0,1,0,2.73-3.35Z" />
                                <path class="cls-2" d="M118.15,300.87c-16.62-12.1-30.12-22.62-39.8-30.36-17.07-13.64-27.75-22.14-47-41.31C22,219.89,12.66,210.47,6.41,198.62,2.49,191.19,0,183.28,0,174.78Q0,110.49.17,46.2c0-6.76.07-6.75,6.49-9C29.13,29.49,51.57,21.69,74.06,14,87.91,9.3,101.82,4.77,115.74.25a6.69,6.69,0,0,1,3.91.09q35.82,12.12,71.6,24.37c14.36,4.91,28.69,9.91,43.07,14.77,1.67.56,1.94,1.47,1.93,3q-.12,28.22-.17,56.42c0,21.79-.16,43.59.08,65.37.12,11.36-.53,22.54-6,32.69a108.18,108.18,0,0,1-10.35,14.82c-11.29,14.29-22.5,23.74-32.51,32.58-10.16,9-20,17.66-35.68,30.38C138.2,285.59,126.7,294.43,118.15,300.87ZM13.45,50.72V62.56q0,54.26.09,108.52A34.58,34.58,0,0,0,14.86,181,56.25,56.25,0,0,0,28.17,204.3c10.67,10.91,21.37,21.82,32.48,32.29,17.06,16.07,35.8,30.14,54.42,44.34,1.94,1.48,3.38,1.59,5.41,0,10.35-8.33,21-16.22,31.23-24.75,19.39-16.26,38.77-32.57,55.55-51.66C213,198,219,191.54,221,182.71a74.77,74.77,0,0,0,2-15.5c.14-36.72,0-73.43,0-110.15V51.37c-16-5.54-31.79-11-47.6-16.48Q147.87,25.41,120.3,16a5.9,5.9,0,0,0-3.31-.37c-5.26,1.61-10.47,3.39-15.67,5.18C88.5,25.22,75.72,29.72,62.9,34.08,46.48,39.66,30,45.14,13.45,50.72Z" />
                                <path class="cls-3" d="M107.54,130.8c-6.9,0-13.48-.07-20.06.08-.85,0-1.8,1-2.49,1.73-8.56,9.19-17.06,18.43-25.64,27.6a3.65,3.65,0,0,1-2.43.77c-4.7.05-9.4,0-14.1-.1a4.41,4.41,0,0,1-2.74-1.21c-3.94-4-7.77-8.07-11.6-12.15-.47-.49-1.11-1.13-1.12-1.71-.07-7.48-.05-15-.05-22.87h81.18a20.38,20.38,0,0,0-2-2.83q-13.15-12.52-26.36-25c-.33-.3-.72-.54-1.21-.91-3.32,3.6-6.59,7.17-9.89,10.72-.88,1.2-6.41,6.65-8.24,7.69-2.32,1.33-4.09,1.3-10.5,1.5-5.26.17-10.53-.19-15.79-.26a11.79,11.79,0,0,1-4.85-1.45,3.91,3.91,0,0,1-1.86-2.72c-.19-7.87-.18-15.74-.18-23.6a3.09,3.09,0,0,1,.62-2c5.66-6.19,10.88-12.94,17.29-18.25,3.67-3,6.69-5.35,6.83-10.42.06-2,1.6-3,4-2.88a105.08,105.08,0,0,0,13.28-.18,6.86,6.86,0,0,0,4-2.1c3.1-3.28,5.92-6.83,8.91-10.22a2.61,2.61,0,0,1,1.75-.83c7,.12,14.09.39,21.13.45,2.15,0,3.55,1,5.26,2.15,4.63,3.08,5.18,7.31,5.14,12.35q-.45,53.16-.55,106.33c-.07,21.25,0,42.5,0,63.75v15.95h6c.06-1.25.2-2.65.2-4.06q.12-32.83.2-65.66.09-36.21.19-72.43c0-14.92.55-29.86-.11-44.75-.26-5.89,1.42-9.71,5.85-12.83a5.25,5.25,0,0,1,2.69-.88c7-.22,13.92-.41,20.88-.43a4.68,4.68,0,0,1,3.09,1.47c3.11,3.39,6,7,9.07,10.41a4,4,0,0,0,2.55,1.1,118.32,118.32,0,0,0,12.19.42c4.83-.21,6,2.21,7.48,6.56.53,1.59,4.91,7,6.47,8.61q7.78,7.74,15.23,15.82a6.75,6.75,0,0,1,1.5,4.25c0,6.87-.2,13.74-.34,20.61-.08,4-1.44,6-5.43,6.5-5.36.65-17.5.9-18.09,1-6.35,1.53-10.59-1.83-14.47-6.13-4.06-4.49-8.17-8.93-12.22-13.44a10.09,10.09,0,0,1-1.17-2.15c-4.14,4-7.54,7.37-11,10.68-5.08,4.88-10.22,9.71-15.26,14.64a19.23,19.23,0,0,0-2.14,3.41h79.67c0,4.85-.43,9.49.11,14a20.43,20.43,0,0,1,0,5.42,17.87,17.87,0,0,1-.45,2.08,32.9,32.9,0,0,1-5.36,8c-2.71,2.35-8.87,8.79-9.68,8.78-4.79,0-9.59-.06-14.37-.27a4.37,4.37,0,0,1-2.72-1.26c-6.24-6.41-12.39-12.9-18.57-19.37-2.75-2.87-5.46-5.78-8.24-8.62a3.52,3.52,0,0,0-2-1.24c-6-.1-12.07-.06-18.28-.06,0,11.43,0,22.43,0,33.44q-.08,36.08-.17,72.16c0,2.52,0,16.56-2.47,20.55-3.36,5.55-8.27,6.14-13,1.81-4.58-4.16-4.42-17.61-4.43-18.87q-.19-30.51-.41-61c0-4.86,0-9.72,0-14.78a8.65,8.65,0,0,0-5.72,7.6c.1,7.87.33,15.73.39,23.6q.12,15.33,0,30.65c0,2.18-.14,3.4-.82,4.08a2.76,2.76,0,0,1-1.18.6,7.15,7.15,0,0,1-3.66.22c0-3.27,0-8.37-.12-14.62-.16-7.47-.35-9.32-.64-19-.42-13.74.13-4.84-.09-21.3-.13-9.47-.3-11.84,1.7-13.74,1.48-1.41,6.23-4.54,8.13-7.93l.11-.19c1.25-2.41,1-4.7,1.06-6.49C107.58,141.74,107.54,136.24,107.54,130.8Zm71.78-70H164.07c0,7.89-.34,15.58.14,23.22a22.23,22.23,0,0,0,3.29,10.34c2.89,4.43,6.79,8.2,10.35,12.17a3.78,3.78,0,0,0,2.49,1.24c6,0,12.1-.31,18.15-.39,2,0,2.35-1,2.39-2.7.1-5,.42-10.11.5-15.17a3.91,3.91,0,0,0-1.12-2.48C195.88,82.52,180.12,62.37,179.32,60.85Zm-72.08,51.44.88-.38c0-3.6.11-7.2-.06-10.78a6.91,6.91,0,0,0-1.32-3.85C102.9,92.72,99.17,88,94.81,84c-3.11-2.87-4.18-5.84-3.57-9.77A4.64,4.64,0,0,0,89,69c-3.59-2.39-3.71-6.63-.71-10.16a6.74,6.74,0,0,1,10-.71A8.24,8.24,0,0,1,99,69.41c-2.1,2.28-2.45,5-.89,7.2,2.77,3.89,6.17,7.33,9.31,11l.68-.45V47.57c-6.89,0-13.57,0-20.26,0a3.13,3.13,0,0,0-2,.58,58.69,58.69,0,0,0-4.55,4.65,4,4,0,0,0-1.06,2.35c0,9,0,18.08.22,27.11a7.53,7.53,0,0,0,1.92,4.41c4.65,5.17,9.45,10.21,14.3,15.2C100.11,105.44,103.71,108.83,107.24,112.29Zm22-1a4,4,0,0,0,.91-.48c6-6.14,25.19-23.12,26.18-25.11a5.21,5.21,0,0,0,.51-2.32c.15-9,.35-18.08.47-27.12a3.57,3.57,0,0,0-.73-2.15c-5.69-6.57-6-6.69-14.84-6.72-4.29,0-8.58,0-12.72,0V85.51c2.77-3.13,5-5.77,7.38-8.32,4-4.27,4.05-4.76,1-9.63-2.12-3.31-1.15-7.5,2.32-10,3.21-2.31,7.27-1.58,9.8,1.76a7.17,7.17,0,0,1,1.12,7.48c-.35.7-1.32,1.07-2.09,2.35a3.32,3.32,0,0,1-.85,1.06c-.66.53-1,.35-1.34.71-.45.55.14,1.31.49,3.26a5.76,5.76,0,0,1,.05,2.76c-.27.94-11,11.11-16.72,16.67a2.62,2.62,0,0,0-.85,1.56C129.23,100.48,129.25,105.77,129.25,111.27ZM59,60.94c-1.58,2.31-23.63,27.28-23.67,28.5-.16,4.69,0,9.39-.11,14.08-.06,3.26.05,3.67,3.35,3.68,5.6,0,11.2-.16,16.8-.35a3.57,3.57,0,0,0,2.17-.92c4-3.89,7.82-7.87,12.25-12.36-3.6,0-6.63-.12-9.64.06-1.3.08-2.54.86-3.84,1.24-1.55.45-3.6,1.62-4.59,1a14.41,14.41,0,0,1-5.45-5.28c-1.85-3.53.73-8.45,4.61-10,3.62-1.42,6.17,0,8.2,4.31A2.74,2.74,0,0,0,61,86.39c3.94.13,7.89.06,11.82.06,0-3.9,0-7.14,0-10.37.06-4.43.19-8.85.28-13.28,0-1.23-.06-2.47-1.77-2.4C67.21,60.56,63.08,60.76,59,60.94Zm100.29,69.55-.35.8c.72.76,1.44,1.51,2.15,2.27Q170,143,178.88,152.49a2.53,2.53,0,0,0,1.51.82c11.36.48,11.63.36,19.25-8.25.17-.2.44-.35.55-.58a4.58,4.58,0,0,0,.68-1.71c0-4.12,0-8.23,0-12.28Zm-124.06-.13c0,3.95,0,7.74,0,11.53a4.92,4.92,0,0,0,.72,2.7c1.76,2.28,3.76,4.38,5.58,6.63a6.87,6.87,0,0,0,2,1.81,6,6,0,0,0,.74.33,18.13,18.13,0,0,0,12-.67c5-2.11,5.81-5.2,15.45-16.52,2.12-2.5,3.92-4.5,5.1-5.81Zm83.52,124.12c2.6,0,5.11-2.26,4.93-4.72s-3.35-4.36-5.94-3.86c-1.86.35-3.85,1.94-3.92,4.08C113.78,252.45,116.31,254.49,118.79,254.48Z" />
                                <path class="cls-4" d="M154.05,168c-.1,1-.35,35.09-.4,51.18,0,1.65.28,2.7,2.15,3.44,2.88,1.13,3.36,4.07,3.66,6.8.53,4.75-2.68,9.23-6.92,9.86-4.92.73-8.89-2-9.41-7-.34-3.31-.06-6.67,3.29-8.84.54-.35.73-1.55.73-2.36,0-8.13-.05-16.27,0-24.4.06-7.78,2.1-33.49.68-35.08-2.42-2.69-5-5.26-7.3-8a14.49,14.49,0,0,1-2.93-4.78,4.57,4.57,0,0,1,1-3.77c.58-.63,2.42-.64,3.4-.23a11.22,11.22,0,0,1,3.6,2.78c8.55,9.32,27.12,29.56,27.75,30.44,2.36,3.26,4.74,5,9.37,3.47s9.41,1.51,11.42,5.71a13.26,13.26,0,0,1-2.62,14.56,11,11,0,0,1-17.7-11.87,2.69,2.69,0,0,0-.44-2.24c-5.3-5.79-17.49-19.3-18.2-20.33Zm25.39,25.13c-.12,2.54,1.92,4.5,4.86,4.66,2.2.12,4.94-2.7,5-5.15a4.7,4.7,0,0,0-4.33-5A5.4,5.4,0,0,0,179.44,193.13ZM148,230.42a3.77,3.77,0,0,0,3.1,3.16A3,3,0,0,0,153,233a3.08,3.08,0,0,0,1.18-3,3.08,3.08,0,1,0-6.15.45Z" />
                                <path class="cls-5" d="M61.84,189.76c2.34,5.26.57,11.63-4.39,14.31-5.39,2.91-11.67,1.25-15.2-4s-2.69-12.46,2-15.92c3.66-2.69,7.88-2.65,12.17-1.39a3,3,0,0,0,2.58-.56c7-7.76,13.95-15.61,20.88-23.45,4.23-4.78,8.36-9.66,12.71-14.32A4.85,4.85,0,0,1,96.44,143c1.8.38,2.81,3.78,2,5.58a11.52,11.52,0,0,1-1.86,2.65q-9,9.94-18,19.86c-4.07,4.47-8.21,8.88-12.28,13.35C64.83,186,63.51,187.75,61.84,189.76Z" />
                                <path class="cls-6" d="M132.91,156c4.94,2.1,7.07,5.64,7.05,10.22-.09,19.52-.07,39-.05,58.55,0,4-.38,4.44-3.78,4.69-2.09.16-2.93-.52-2.91-2.7.07-5.51,0-11-.07-16.53l-.24-49.88C132.9,159,132.91,157.67,132.91,156Z" />
                                <path class="cls-7" d="M208.38,175.27c0,4-3,7.32-6.77,7.36s-7.49-4-7.42-7.62,3.4-7.23,6.77-7.22A7.74,7.74,0,0,1,208.38,175.27Z" />
                                <path class="cls-8" d="M27.2,175.23a7,7,0,0,1,6.78-7,6.08,6.08,0,0,1,6,6.31c-.11,4.37-3.13,7.95-6.6,7.83S27.14,179.14,27.2,175.23Z" />
                                <path class="cls-9" d="M85.54,112.6a6.09,6.09,0,1,1-5.88-6.8A6.14,6.14,0,0,1,85.54,112.6Z" />
                                <path class="cls-10" d="M191.62,140.9a6.33,6.33,0,0,1-6.35,6.66c-3.15,0-6.53-3.45-6.51-6.73,0-4,3-7.34,6.46-7.35S191.62,136.91,191.62,140.9Z" />
                                <path class="cls-11" d="M51.54,133.76a6.37,6.37,0,1,1-6.92,6.83A6.67,6.67,0,0,1,51.54,133.76Z" />
                                <circle class="cls-12" cx="155.8" cy="111.94" r="5.73" />
                                <circle class="cls-13" cx="181.97" cy="84.33" r="8.22" />
                                <circle class="cls-14" cx="52.82" cy="88.15" r="8.22" />
                                <circle class="cls-15" cx="143.17" cy="63.34" r="8.22" />
                                <circle class="cls-16" cx="94.19" cy="63.34" r="8.22" />
                                <circle class="cls-17" cx="33.59" cy="174.21" r="8.22" />
                                <circle class="cls-18" cx="201.38" cy="174.21" r="8.22" />
                                <circle class="cls-19" cx="184.37" cy="192.73" r="5.81" />
                                <circle class="cls-20" cx="51.64" cy="193.79" r="5.81" />
                                <circle class="cls-20" cx="85.33" cy="230.65" r="3.4" />
                                <circle class="cls-19" cx="151.14" cy="230.31" r="3.4" />
                                <circle class="cls-20" cx="118.79" cy="250.15" r="4.93" />
                            </g>
                        </g>
                    </svg>
                </div>
            </div>
        </div>
    </div>
    </section>


    <section class="section">
      <div class="row">
    
        <!-- Bar Chart -->
        <div id="totalBlockedRequest" class="col-lg-6">
          <div class="cardindex">
            <div class="cardindex-body">
              <h5 class="cardindex-title" data-translate="blocked_requests_rate">Blocked Requests & Rate</h5>
              <canvas id="totalBlockedRequests" style="max-height: 400px;"></canvas>
            </div>
          </div>
        </div>
        <!-- End Combined Chart -->
    
        <div id="blockedRequestsByCategor" class="col-lg-6">
          <div class="cardindex">
            <div class="cardindex-body">
              <h5 class="cardindex-title" data-translate="blocked_requests_by_category">Blocked Requests by Category</h5>
              <canvas id="blockedRequestsByCategory" style="max-height:240px; min-width: 240px;"></canvas>
            </div>
          </div>
        </div>
        <!-- End Pie Chart -->
    
        <div id="blockRateOverTimeByCategor" class="col-lg-12">
          <div class="cardindex">
            <div class="cardindex-body">
              <h5 class="cardindex-title" data-translate="block_rate_over_time_by_category">Block Rate Over Time by Category</h5>
              <canvas id="blockRateOverTimeByCategory" style="max-height: 400px;"></canvas>
            </div>
          </div>
        </div>
        <!-- End Line Chart -->
    
        <div id="severit" class="col-lg-6">
          <div class="cardindex">
            <div class="cardindex-body">
              <h5 class="cardindex-title" data-translate="severity_distribution_by_category">Severity Distribution by Category</h5>
              <canvas id="severity"></canvas>
            </div>
          </div>
        </div>
        <!-- End Bar Chart -->
    
        <div id="SeverityTim" class="col-lg-6">
          <div class="cardindex">
            <div class="cardindex-body">
              <h5 class="cardindex-title" data-translate="severity_over_time_by_category">Severity Over Time by Category</h5>
              <canvas id="SeverityTime" style="max-height: 400px;"></canvas>
            </div>
          </div>
        </div>
        <!-- End Line Chart -->
    
        <div id="totalAbusiveUsersChar" class="col-12">
          <div class="cardindex">
            <div class="cardindex-body">
              <h5 class="cardindex-title" data-translate="abusive_user_detection">Abusive User Detection</h5>
              <div class="chart">
                <h6 data-translate="total_abusive_users_over_time">Total Potential Abusive Users Over Time</h6>
                <canvas id="totalAbusiveUsersChart" style="max-height: 400px;"></canvas>
              </div>
    
              <div class="table-responsive mt-4">
                <h6 data-translate="detailed_analysis_abusive_users">Detailed Analysis of Potentially Abusive Users</h6>
                <button class="btn btn-sm ms-2 btn-outline-primary" type="button" data-bs-toggle="collapse" data-bs-target="#abusiveUsersTable" aria-expanded="false" aria-controls="abusiveUsersTable" data-translate="show_info">Show info</button>
              </h6>
                <div class="collapse" id="abusiveUsersTable">
                  <table class="table table-bordered">
                    <thead>
                      <tr>
                        <th data-translate="user_guid">User GUID</th>
                        <th data-translate="user">User</th>
                        <th data-translate="text">Text</th>
                        <th data-translate="response">Response</th>
                        <th data-translate="abuse_score">Abuse Score</th>
                        <th data-translate="abuse_score_trend">Abuse Score Trend</th>
                        <th data-translate="evaluate_date">Evaluate Date</th>
                        <th data-translate="total_abuse_ratio">Total Abuse Request Ratio/Count</th>
                        <th data-translate="violence_abuse_ratio">Abuse Ratio/Count for Violence</th>
                        <th data-translate="hate_abuse_ratio">Abuse Ratio/Count for Hate</th>
                        <th data-translate="sexual_abuse_ratio">Abuse Ratio/Count for Sexual</th>
                        <th data-translate="self_harm_abuse_ratio">Abuse Ratio/Count for Self-harm</th>
                      </tr>
                    </thead>
                    <tbody id="abusiveUsersData">
                      <!-- Data will be populated here -->
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- End Abusive User Detection Section -->
    
        <div id="hallucinationChar" class="col-12">
          <div class="cardindex">
            <div class="cardindex-body">
              <h5 class="cardindex-title" data-translate="hallucination_detection">Hallucination Detection</h5>
              <div class="chart">
                <h6 data-translate="hallucinations_detected_each_day">Number of Hallucinations Detected Each Day</h6>
                <canvas id="hallucinationChart" style="max-height: 400px;"></canvas>
              </div>
              <div class="table-responsive mt-4">
                <h6 data-translate="details_of_hallucination">Details of Each Hallucination</h6>
                <button class="btn btn-sm ms-2 btn-outline-primary" type="button" data-bs-toggle="collapse" data-bs-target="#hallucinationTable" aria-expanded="false" aria-controls="hallucinationTable" data-translate="show_info">Show Info</button>
              </h6>
                <div class="collapse" id="hallucinationTable">
                  <table class="table table-bordered">
                    <thead>
                      <tr>
                        <th data-translate="user_input">User Input</th>
                        <th data-translate="ai_response">AI Response</th>
                        <th data-translate="date">Date</th>
                        <th data-translate="prompt">Prompt</th>
                        <th data-translate="response">Response</th>
                      </tr>
                    </thead>
                    <tbody id="hallucinationData">
                      <!-- Data will be populated here -->
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
    
        <div id="biasPieChar" class="col-12">
          <div class="cardindex">
            <div class="cardindex-body">
              <h5 class="cardindex-title" data-translate="bias_detection">Bias Detection</h5>
              <div class="chart">
                <h6 data-translate="types_of_bias_detected">Types of Bias Detected</h6>
                <canvas id="biasPieChart" style="max-height: 400px;"></canvas>
              </div>
              <div class="chart mt-4">
                <h6 data-translate="bias_incidents_over_time">Bias Incidents Over Time</h6>
                <canvas id="biasLineChart" style="max-height: 400px;"></canvas>
              </div>
              <div class="table-responsive mt-4">
                <h6 data-translate="details_of_bias_incident">Details of Each Bias Incident</h6>
                <button class="btn btn-sm ms-2 btn-outline-primary" type="button" data-bs-toggle="collapse" data-bs-target="#biasTable" aria-expanded="false" aria-controls="biasTable" data-translate="show_info">Show Info</button>
              </h6>
                <div class="collapse" id="biasTable">
                  <table class="table table-bordered">
                    <thead>
                      <tr>
                        <th data-translate="user_input">User Input</th>
                        <th data-translate="ai_response">AI Response</th>
                        <th data-translate="date">Date</th>
                        <th data-translate="text">Text</th>
                        <th data-translate="response">Response</th>
                      </tr>
                    </thead>
                    <tbody id="biasData">
                      <!-- Data will be populated here -->
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
    
        <div id="promptInjectionChar" class="col-12">
          <div class="cardindex">
            <div class="cardindex-body">
              <h5 class="cardindex-title" data-translate="prompt_injection_detection">Prompt Injection/Jailbreak Detection</h5>
              <div class="chart">
                <h6 data-translate="prompt_injections_detected_each_day">Number of Prompt Injections Detected Each Day</h6>
                <canvas id="promptInjectionChart" style="max-height: 400px;"></canvas>
              </div>
              <div class="table-responsive mt-4">
                <h6 data-translate="details_of_prompt_injection">Details of Each Prompt Injection</h6>
                <button class="btn btn-sm ms-2 btn-outline-primary" type="button" data-bs-toggle="collapse" data-bs-target="#promptInjectionTable" aria-expanded="false" aria-controls="promptInjectionTable" data-translate="show_info">Show Info</button>
                <div class="collapse" id="promptInjectionTable">
                  <table class="table table-bordered">
                    <thead>
                      <tr>
                        <th data-translate="number">N°</th>
                        <th data-translate="class">Class</th>
                        <th data-translate="date">Date</th>
                        <th data-translate="text">Text</th>
                      </tr>
                    </thead>
                    <tbody id="promptInjectionData">
                      <!-- Data will be populated here -->
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
    
        <div id="dataExposureLineChar" class="col-12">
          <div class="cardindex">
            <div class="cardindex-body">
              <h5 class="cardindex-title" data-translate="data_exposure_detection">Data Exposure (Leakage, Lineage, Observability, Privacy)</h5>
              <div class="chart">
                <h6 data-translate="data_exposure_incidents_over_time">Data Exposure Incidents Over Time</h6>
                <canvas id="dataExposureLineChart" style="max-height: 400px;"></canvas>
              </div>
              <div class="chart mt-4">
                <h6 data-translate="types_of_data_exposed">Types of Data Exposed</h6>
                <canvas id="dataExposurePieChart" style="max-height: 400px;"></canvas>
              </div>
              <div class="table-responsive mt-4">
                <h6 data-translate="details_of_data_exposure_incident">Details of Each Data Exposure Incident</h6>
                <button class="btn btn-sm ms-2 btn-outline-primary" type="button" data-bs-toggle="collapse" data-bs-target="#dataExposureTable" aria-expanded="false" aria-controls="dataExposureTable" data-translate="show_info">Show Info</button>
                <div class="collapse" id="dataExposureTable">
                  <table class="table table-bordered">
                    <thead>
                      <tr>
                        <th data-translate="data_type">Data Type</th>
                        <th data-translate="user_input">User Input</th>
                        <th data-translate="ai_response">AI Response</th>
                        <th data-translate="date">Date</th>
                      </tr>
                    </thead>
                    <tbody id="dataExposureData">
                      <!-- Data will be populated here -->
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
    
      </div>
    </section>
    
  </main><!-- End #main -->

    <!-- Vendor JS Files -->
    <script src="assets/vendor/apexcharts/apexcharts.min.js"></script>
    <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="assets/vendor/chart.js/chart.umd.js"></script>
    <script src="assets/vendor/echarts/echarts.min.js"></script>
    <script src="assets/vendor/quill/quill.js"></script>
    <script src="assets/vendor/simple-datatables/simple-datatables.js"></script>
    <script src="assets/vendor/tinymce/tinymce.min.js"></script>
    <script src="assets/vendor/php-email-form/validate.js"></script>
    <script src="assets/js/main.js"></script>
    <script src="assets/js/lenguaje.js"></script>


<script>
document.addEventListener('DOMContentLoaded', function () {
  // Definir traducciones para los departamentos
  const departmentTranslations = {
    en: {
      'Account Manager': 'Account Manager',
      'Customer Service': 'Customer Service',
      'Sales': 'Sales',
      'Operations': 'Operations',
      'Finance': 'Finance',
      'IT Support': 'IT Support',
      'Human Resources': 'Human Resources'
    },
    es: {
      'Account Manager': 'Gerente de Cuenta',
      'Customer Service': 'Servicio al Cliente',
      'Sales': 'Ventas',
      'Operations': 'Operaciones',
      'Finance': 'Finanzas',
      'IT Support': 'Soporte TI',
      'Human Resources': 'Recursos Humanos'
    }
  };

  // Obtener el idioma actual desde localStorage (por defecto 'en')
  const currentLang = localStorage.getItem('language') || 'en';

  const currentDepartment = localStorage.getItem('currentDepartment');
  const authorizedDepartments = JSON.parse(localStorage.getItem('authorizedDepartments')) || [];

  const departmentSelect = document.getElementById('department-select');
  const userDepartmentDiv = document.getElementById('user-department');

  // Llenar el menú desplegable solo con los departamentos autorizados
  authorizedDepartments.forEach(dep => {
    const option = document.createElement('option');
    option.value = dep;
    option.textContent = departmentTranslations[currentLang][dep]; // Traducir el departamento
    departmentSelect.appendChild(option);
  });

  // Establecer el departamento seleccionado
  if (currentDepartment && authorizedDepartments.includes(currentDepartment)) {
    userDepartmentDiv.textContent = `Current Department: ${departmentTranslations[currentLang][currentDepartment]}`; // Traducir el departamento
    departmentSelect.value = currentDepartment;
  } else if (authorizedDepartments.length > 0) {
    const firstDepartment = authorizedDepartments[0];
    localStorage.setItem('currentDepartment', firstDepartment);
    userDepartmentDiv.textContent = `Current Department: ${departmentTranslations[currentLang][firstDepartment]}`; // Traducir el departamento
    departmentSelect.value = firstDepartment;
  }

  // Manejar cambios de departamento
  departmentSelect.addEventListener('change', function () {
    const selectedDepartment = this.value;
    if (authorizedDepartments.includes(selectedDepartment)) {
      localStorage.setItem('currentDepartment', selectedDepartment);
      userDepartmentDiv.textContent = `Current Department: ${departmentTranslations[currentLang][selectedDepartment]}`; // Traducir el departamento
      // Recargar los datos para el nuevo departamento
      location.reload();
    } else {
      console.error('Intento de seleccionar un departamento no autorizado');
      this.value = localStorage.getItem('currentDepartment');
    }
  });
});
</script>

    

  <!-- ======= Footer ======= -->
  <footer id="footer" class="footerindex">
    <div class="copyright">
      &copy; Copyright <strong><span>Safety Shield Ultra</span></strong>. All Rights Reserved
    </div>
    <div class="credits">
      Designed by <a href="https://www.ultradeeptech.com/">Ultra Deep Tech</a>
    </div>
  </footer><!-- End Footer -->


  
  


  <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>


<script>
  (function() {
    let globalIsDarkMode = false;
  
    function applyTheme(isDarkMode) {
      globalIsDarkMode = isDarkMode;
      document.body.classList.toggle('dark-mode', isDarkMode);
      document.getElementById('lightmode').disabled = isDarkMode;
      document.getElementById('darkmode-base').disabled = !isDarkMode;
      document.getElementById('darkmode-item').disabled = !isDarkMode;
      
      const hackModeIcon = document.querySelector('.hack-mode-icon');
      hackModeIcon.classList.toggle('active', isDarkMode);
      hackModeIcon.classList.toggle('inactive', !isDarkMode);
      hackModeIcon.classList.toggle('bi-moon', !isDarkMode);
      hackModeIcon.classList.toggle('bi-sun', isDarkMode);
      
      document.querySelector('label[for="flexSwitchCheckChecked"]').textContent = isDarkMode ? 'Hack Mode' : 'Light Mode';
      
      localStorage.setItem('theme', isDarkMode ? 'dark-mode' : 'light-mode');
      
      // Llamar a la función de actualización de gráficos inmediatamente
      if (typeof updateAllChartColors === 'function') {
        updateAllChartColors(isDarkMode);
      }
      
      // Disparar el evento themeChanged después de actualizar los gráficos
      document.dispatchEvent(new CustomEvent('themeChanged', { detail: { isDarkMode } }));
    }
  
    function initializeTheme() {
      const currentTheme = localStorage.getItem('theme');
      const isDarkMode = currentTheme === 'dark-mode';
      document.getElementById('flexSwitchCheckChecked').checked = isDarkMode;
      applyTheme(isDarkMode);
    }
  
    document.addEventListener('DOMContentLoaded', function() {
      initializeTheme();
  
      document.querySelector('.hack-mode-icon').addEventListener('click', function() {
        applyTheme(!globalIsDarkMode);
      });
  
      document.getElementById('flexSwitchCheckChecked').addEventListener('change', function(event) {
        applyTheme(event.target.checked);
      });
    });
  
    window.isDatagraficosDarkMode = function() {
      return globalIsDarkMode;
    };
  })();
  </script>

</body>

</html>
